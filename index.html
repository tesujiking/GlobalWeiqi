<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="全球围棋超级联赛">
  <title>全球围棋超级联赛</title>
  <meta property="og:title" content="全球围棋超级联赛" />
  <meta property="og:description" content="全名参与，高手云集，新手友好，真正涨棋的全球围棋超级联赛" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://www.globalweiqi.com/index.html" />
  <meta property="og:image" content="https://www.globalweiqi.com/images/GlobalWeiqi.png" />
  <link rel="stylesheet" href="style.css">

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f9f9f9;
    }

    .site-header {
      background-color: #f8f8f8;
      padding: 20px;
      border-bottom: 1px solid #ccc;
    }

    .logo-link {
      display: flex;
      align-items: center;
      text-decoration: none;
      gap: 15px;
    }

    .site-logo {
      height: 60px;
      width: auto;
    }

    .site-title {
      font-size: 28px;
      font-weight: bold;
      color: #222;
    }

    nav {
      background-color: #222;
      position: relative;
      display: flex; /* 添加flex布局以容纳汉堡按钮 */
      justify-content: space-between; /* 元素两端对齐 */
      align-items: center; /* 垂直居中 */
      padding: 0 20px; /* 为汉堡按钮提供空间 */
    }

    .menu {
      display: flex;
      list-style: none;
      /* 移除左边距，因为nav已有padding */
      padding-left: 0; 
    }

    .menu > li {
      position: relative;
    }

    .menu > li > a {
      display: block;
      color: #fff;
      padding: 16px 20px;
      text-decoration: none;
      font-weight: 500;
    }

    .menu > li:hover {
      background-color: #333;
    }

    .submenu {
      display: none;
      position: absolute;
      background-color: #333;
      top: 100%;
      left: 0;
      min-width: 180px;
      z-index: 100;
    }

    .menu li:hover > .submenu {
      display: block;
    }

    .submenu.active {
      display: block !important;
    }

    .submenu li {
      position: relative;
    }

    .submenu li a {
      display: block;
      color: white;
      padding: 12px 16px;
      text-decoration: none;
    }

    .submenu li a:hover {
      background-color: #444;
    }

    .submenu-3 {
      display: none;
      position: absolute;
      top: 0;
      left: 100%;
      background-color: #444;
      min-width: 180px;
      z-index: 200;
    }

    .has-submenu:hover > .submenu-3 {
      display: block;
    }

    .submenu-3.active {
      display: block !important;
    }

    /* ▼▼▼ 新增汉堡菜单按钮样式 ▼▼▼ */
    .hamburger-toggle {
        display: none; /* 电脑端默认隐藏 */
        background: none;
        border: 1px solid white;
        border-radius: 4px;
        padding: 8px;
        cursor: pointer;
    }

    .hamburger-toggle .bar {
        display: block;
        width: 25px;
        height: 3px;
        margin: 5px auto;
        background-color: white;
        transition: all 0.3s ease-in-out;
    }
    /* ▲▲▲ 新增结束 ▲▲▲ */


    /* ▼▼▼ 核心修改：移动端适配 ▼▼▼ */
    @media (max-width: 768px) {
      nav {
        /* 移动端nav需要padding来容纳按钮，但主菜单要从左边开始 */
        padding: 10px 20px;
      }

      .hamburger-toggle {
        display: block; /* 移动端显示汉堡按钮 */
      }

      /* 默认隐藏主菜单 */
      .menu {
        display: none;
      }
      
      /* 当汉堡菜单被点击后，通过JS添加 .is-open 类来显示主菜单 */
      .menu.is-open {
        display: flex; /* 显示菜单 */
        flex-direction: column;
        position: absolute;
        top: 100%; /* 从导航栏下方开始 */
        left: 0;
        width: 100%;
        background: #222;
        padding-left: 0;
        z-index: 1000;
      }
      
      .menu.is-open > li {
        border-bottom: 1px solid #333;
        width: 100%;
      }
      
      .menu.is-open > li > a {
        padding: 18px 20px;
        font-size: 16px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      
      /* 二级菜单样式 */
      .submenu {
        position: static !important;
        background-color: #333;
        min-width: auto;
        box-shadow: none;
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease;
        display: block; /* 覆盖桌面端的 none */
      }
      
      .submenu.active {
        max-height: 500px;
      }
      
      .submenu li a {
        padding: 15px 40px;
        font-size: 14px;
        color: #ccc;
        border-bottom: 1px solid #444;
      }
      
      .submenu li a:hover {
        background-color: #444;
        color: white;
      }
      
      /* 三级菜单样式 */
      .submenu-3 {
        position: static !important;
        background-color: #444;
        margin-left: 0;
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease;
        display: block;
      }
      
      .submenu-3.active {
        max-height: 200px;
      }
      
      .submenu-3 li a {
        padding: 12px 60px;
        font-size: 13px;
        color: #bbb;
        background-color: #444;
      }
      
      /* 为有子菜单的项目添加下拉箭头 */
      .menu > li.has-submenu > a::after {
        content: '\25BC';
        font-size: 12px;
        transition: transform 0.3s ease;
        color: #999;
      }
      
      .menu > li.has-submenu.active > a::after {
        transform: rotate(180deg);
        color: white;
      }
      
      .submenu li.has-submenu > a::after {
        content: '\25B6';
        font-size: 10px;
        color: #999;
      }
      
      .submenu li.has-submenu.active > a::after {
        content: '\25BC';
        transform: none;
        color: #ccc;
      }
    }

    iframe {
      width: 100%;
      height: calc(100vh - 140px); /* 调整高度：顶部 header + nav */
      border: none;
    }
  </style>
<style>
    #nav-user-status {
        position: absolute;
        top: 20px;
        right: 20px;
        font-size: 16px;
    }
    #nav-user-status a {
        cursor: pointer;
        color: #007bff;
        text-decoration: none;
        margin-left: 15px;
    }
    #nav-user-status a:hover {
        text-decoration: underline;
    }
</style>

</head>
<body>

  <header class="site-header">
    <a href="index.html" class="logo-link">
      <img src="./images/GlobalWeiqi.png" alt="Global Weiqi Logo" class="site-logo">
      <span class="site-title">全球围棋超级联赛 Global Weiqi Super League</span>
    </a>
    <div id="nav-user-status"></div>
  </header>

<nav>
    <button class="hamburger-toggle" id="hamburger-toggle">
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
    </button>
    <ul class="menu" id="main-menu">
      <li class="has-submenu">
        <a href="#">比赛信息</a>
        <ul class="submenu">
          <li><a href="standingsS1R5.html" target="content-frame">第1期（已结束）</a></li>
          <li class="has-submenu">
            <a href="#">第2期（进行中）</a>
            <ul class="submenu-3">
              <li><a href="standingsS2R4.html" target="content-frame">排行榜</a></li>
              <li><a href="GamesListS2R4.html" target="content-frame">第4轮对局</a></li>
            </ul>
          </li>
        </ul>
      </li>
      <li class="has-submenu">
        <a href="#">重要说明</a>
        <ul class="submenu">
          <li><a href="regulations.html" target="content-frame">比赛章程</a></li>
          <li><a href="deposit.html" target="content-frame">保证金</a></li>
          <li><a href="Review.html" target="content-frame">复盘讲解</a></li>
          <li><a href="Mcmahon.html" target="content-frame">麦克马洪编排</a></li>
          <li><a href="play.html" target="content-frame">下棋</a></li>
          <li><a href="board.html" target="content-frame">对弈棋盘</a></li>
          <li><a href="pairing_flow.html" target="content-frame">分区流动</a></li>
          <li><a href="flow_test.html" target="content-frame">流动测试</a></li>
          <li><a href="api_debug.html" target="content-frame">API调试</a></li>
          <li><a href="mobile_menu_test.html" target="content-frame">菜单测试</a></li>
          <li><a href="menu_debug.html" target="content-frame">菜单调试</a></li>
          <li><a href="simple_menu_test.html" target="content-frame">简单测试</a></li>
          <li><a href="login.html" target="content-frame">登陆</a></li>
          <li><a href="zhuce.html" target="content-frame">注册</a></li>
        </ul>
      </li>
      <li><a href="ratinghistory.html" target="content-frame">会员名录</a></li>
      <li><a href="register.html" target="content-frame" style="color: red; font-weight: bold;">马上报名</a></li>
      <li><a href="calculator.html" target="content-frame">计算器</a></li>
    </ul>
</nav>

  <iframe src="home.html" name="content-frame"></iframe>

  <script>
    const API_BASE_URL = 'https://yaoshen.pythonanywhere.com/api';
    const userStatusDiv = document.getElementById('nav-user-status');
    const contentFrame = document.querySelector('iframe[name="content-frame"]');

    function initMobileMenu() {
        // ... 您原有的这部分JS代码保持不变，因为它负责子菜单的展开 ...
        const menuItems = document.querySelectorAll('.menu > li.has-submenu > a');
        menuItems.forEach((menuLink) => {
            menuLink.addEventListener('click', function(e) {
                if (window.innerWidth > 768) return; // 仅在移动端生效
                e.preventDefault();
                e.stopPropagation();
                const parentLi = this.parentElement;
                const submenu = parentLi.querySelector('.submenu');
                if (submenu) {
                    const isCurrentlyActive = submenu.classList.contains('active');
                    // 先关闭其他一级菜单
                    document.querySelectorAll('.menu > li.has-submenu').forEach(item => {
                        if(item !== parentLi) {
                            item.classList.remove('active');
                            item.querySelector('.submenu').classList.remove('active');
                        }
                    });
                    // 再关闭所有三级菜单
                    document.querySelectorAll('.submenu-3.active').forEach(activeMenu3 => {
                        activeMenu3.classList.remove('active');
                        activeMenu3.parentElement.classList.remove('active');
                    });
                    if (!isCurrentlyActive) {
                        submenu.classList.add('active');
                        parentLi.classList.add('active');
                    } else {
                        submenu.classList.remove('active');
                        parentLi.classList.remove('active');
                    }
                }
            });
        });
        const submenuItems = document.querySelectorAll('.submenu li.has-submenu > a');
        submenuItems.forEach((submenuLink) => {
            submenuLink.addEventListener('click', function(e) {
                if (window.innerWidth > 768) return; // 仅在移动端生效
                e.preventDefault();
                e.stopPropagation();
                const parentLi = this.parentElement;
                const submenu3 = parentLi.querySelector('.submenu-3');
                if (submenu3) {
                    submenu3.classList.toggle('active');
                    parentLi.classList.toggle('active');
                }
            });
        });
    }

    function checkLoginStatus() {
        // ... 您原有的登录检查代码 ...
    }
    function handleLogout() {
        // ... 您原有的登出代码 ...
    }

    document.addEventListener('DOMContentLoaded', function() {
        checkLoginStatus();
        initMobileMenu();

        // ▼▼▼ 新增：汉堡菜单的点击逻辑 ▼▼▼
        const hamburger = document.getElementById('hamburger-toggle');
        const mainMenu = document.getElementById('main-menu');
        hamburger.addEventListener('click', function() {
            mainMenu.classList.toggle('is-open');
        });
        // ▲▲▲ 新增结束 ▲▲▲
    });

    // 省略了您原有的其他JS代码，因为它们与菜单功能无关
    // 您应该将它们保留在原位
  </script>

</body>
</html>
