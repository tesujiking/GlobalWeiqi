<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="description" content="å…¨çƒå›´æ£‹è¶…çº§è”èµ›">

    <title>å…¨çƒå›´æ£‹</title>
    <meta property="og:title" content="å…¨çƒå›´æ£‹è¶…çº§è”èµ›" />
    <meta property="og:description" content="å…¨åå‚ä¸ï¼Œé«˜æ‰‹äº‘é›†ï¼Œæ–°æ‰‹å‹å¥½ï¼ŒçœŸæ­£æ¶¨æ£‹çš„å…¨çƒå›´æ£‹è¶…çº§è”èµ›" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://www.globalweiqi.com/index.html" />
    <meta property="og:image" content="https://www.globalweiqi.com/images/GlobalWeiqi.png" />
    <link rel="stylesheet" href="style.css">


  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      color: #333;
    }

    /* ç°ä»£åŒ–å¤´éƒ¨è®¾è®¡ */
    .site-header {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255, 255, 255, 0.2);
      padding: 15px 30px;
      box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
      position: sticky;
      top: 0;
      z-index: 1000;
    }

    .header-container {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo-link {
      display: flex;
      align-items: center;
      text-decoration: none;
      gap: 15px;
      transition: transform 0.2s ease;
    }

    .logo-link:hover {
      transform: translateY(-2px);
    }

    .site-logo {
      height: 50px;
      width: auto;
      border-radius: 8px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    .site-title {
      font-size: 24px;
      font-weight: 700;
      background: linear-gradient(135deg, #667eea, #764ba2);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .site-subtitle {
      font-size: 12px;
      color: #666;
      margin-top: 2px;
      font-weight: 400;
    }

    /* ç°ä»£åŒ–å¯¼èˆªè®¾è®¡ */
    nav {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    }

    .nav-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 30px;
    }

    .menu {
      display: flex;
      list-style: none;
      padding: 0;
      margin: 0;
      align-items: center;
    }

    .menu > li {
      position: relative;
    }

    .menu > li > a {
      display: block;
      color: #333;
      padding: 18px 20px;
      text-decoration: none;
      font-weight: 600;
      font-size: 15px;
      transition: all 0.3s ease;
      border-radius: 8px;
      margin: 0 5px;
    }

    .menu > li > a:hover {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
    }

    /* ç‰¹æ®ŠæŒ‰é’®æ ·å¼ */
    .menu > li > a[style*="color: red"] {
      background: linear-gradient(135deg, #ff6b6b, #ee5a24) !important;
      color: white !important;
      font-weight: 700;
      padding: 12px 25px;
      border-radius: 25px;
      box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4);
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0% { box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4); }
      50% { box-shadow: 0 4px 25px rgba(255, 107, 107, 0.6); }
      100% { box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4); }
    }

    .menu > li > a[style*="color: red"]:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 25px rgba(255, 107, 107, 0.5);
    }

    /* ç°ä»£åŒ–å­èœå•è®¾è®¡ */
    .submenu {
      display: none;
      position: absolute;
      background: white;
      top: 100%;
      left: 0;
      min-width: 220px;
      z-index: 100;
      border-radius: 12px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
      border: 1px solid rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
      padding: 8px 0;
      margin-top: 10px;
    }

    /* æ¡Œé¢ç«¯é¼ æ ‡æ‚¬åœæ˜¾ç¤ºå­èœå• */
    .menu li:hover > .submenu {
      display: block;
      animation: fadeInUp 0.3s ease;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* ç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯éƒ½ä½¿ç”¨çš„æ¿€æ´»çŠ¶æ€ */
    .submenu.active {
      display: block !important;
      animation: fadeInUp 0.3s ease;
    }

    .submenu li {
      position: relative;
      margin: 2px 8px;
    }

    .submenu li a {
      display: block;
      color: #333;
      padding: 12px 16px;
      text-decoration: none;
      border-radius: 8px;
      transition: all 0.2s ease;
      font-weight: 500;
    }

    .submenu li a:hover {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      transform: translateX(5px);
    }

    /* ä¸‰çº§èœå•ç°ä»£åŒ–è®¾è®¡ */
    .submenu-3 {
      display: none;
      position: absolute;
      top: 0;
      left: 100%;
      background: white;
      min-width: 200px;
      z-index: 200;
      border-radius: 12px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
      border: 1px solid rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
      padding: 8px 0;
      margin-left: 10px;
    }

    .has-submenu:hover > .submenu-3 {
      display: block;
      animation: fadeInRight 0.3s ease;
    }

    @keyframes fadeInRight {
      from {
        opacity: 0;
        transform: translateX(-10px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .submenu-3.active {
      display: block !important;
      animation: fadeInRight 0.3s ease;
    }

    .submenu-3 li {
      margin: 2px 8px;
    }

    .submenu-3 li a {
      display: block;
      color: #333;
      padding: 10px 16px;
      text-decoration: none;
      border-radius: 8px;
      transition: all 0.2s ease;
      font-weight: 500;
      font-size: 14px;
    }

    .submenu-3 li a:hover {
      background: linear-gradient(135deg, #764ba2, #667eea);
      color: white;
      transform: translateX(5px);
    }

    /* ç§»åŠ¨ç«¯ç°ä»£åŒ–é€‚é… */
    @media (max-width: 768px) {
      .header-container {
        padding: 0 15px;
      }
      
      .site-title {
        font-size: 18px;
      }
      
      .nav-container {
        padding: 0 15px;
      }
      
      .menu {
        flex-direction: column;
        padding: 0;
      }
      
      .menu > li {
        width: 100%;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      }
      
      .menu > li > a {
        padding: 18px 20px;
        font-size: 16px;
        margin: 0;
        border-radius: 0;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      
      .menu > li > a:hover {
        transform: none;
        background: linear-gradient(135deg, #667eea, #764ba2);
      }
      
      /* ç§»åŠ¨ç«¯å­èœå• */
      .submenu {
        position: static !important;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        min-width: auto;
        box-shadow: none;
        border: none;
        border-radius: 0;
        margin: 0;
        padding: 0;
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease;
      }
      
      .submenu.active {
        max-height: 500px;
        display: block !important;
        animation: none;
      }
      
      .submenu li {
        margin: 0;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      }
      
      .submenu li a {
        padding: 15px 40px;
        font-size: 14px;
        color: #333;
        border-radius: 0;
      }
      
      .submenu li a:hover {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        transform: none;
      }
      
      /* ç§»åŠ¨ç«¯ä¸‰çº§èœå• */
      .submenu-3 {
        position: static !important;
        background: rgba(240, 240, 240, 0.95);
        margin-left: 0;
        border-radius: 0;
        box-shadow: none;
        border: none;
        padding: 0;
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease;
      }
      
      .submenu-3.active {
        max-height: 200px;
        display: block !important;
        animation: none;
      }
      
      .submenu-3 li {
        margin: 0;
      }
      
      .submenu-3 li a {
        padding: 12px 60px;
        font-size: 13px;
        color: #555;
        border-radius: 0;
      }
      
      .submenu-3 li a:hover {
        background: linear-gradient(135deg, #764ba2, #667eea);
        color: white;
        transform: none;
      }
      
      /* ç§»åŠ¨ç«¯ç®­å¤´æ ·å¼ */
      .menu > li.has-submenu > a::after {
        content: '\25BC';
        font-size: 12px;
        transition: transform 0.3s ease;
        color: #666;
      }
      
      .menu > li.has-submenu.active > a::after {
        transform: rotate(180deg);
        color: white;
      }
      
      .submenu li.has-submenu > a::after {
        content: '\25B6';
        font-size: 10px;
        color: #666;
      }
      
      .submenu li.has-submenu.active > a::after {
        content: '\25BC';
        transform: none;
        color: #333;
      }
    }

    /* ä¸»å†…å®¹åŒºåŸŸç°ä»£åŒ–è®¾è®¡ */
    .main-content {
      max-width: 1200px;
      margin: 20px auto;
      padding: 0 30px;
    }

    .content-container {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 16px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      min-height: calc(100vh - 200px);
    }

    /* è‹±é›„åŒºåŸŸè®¾è®¡ */
    .hero-section {
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
      padding: 80px 60px;
      text-align: center;
    }

    .hero-title {
      font-size: 48px;
      font-weight: 800;
      background: linear-gradient(135deg, #667eea, #764ba2);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 20px;
    }

    .hero-subtitle {
      font-size: 20px;
      color: #666;
      line-height: 1.6;
      max-width: 600px;
      margin: 0 auto 40px;
    }

    .hero-buttons {
      display: flex;
      gap: 20px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .btn {
      padding: 15px 30px;
      border-radius: 50px;
      text-decoration: none;
      font-weight: 600;
      font-size: 16px;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .btn-primary {
      background: linear-gradient(135deg, #ff6b6b, #ee5a24);
      color: white;
      box-shadow: 0 8px 25px rgba(255, 107, 107, 0.4);
    }

    .btn-primary:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 35px rgba(255, 107, 107, 0.5);
    }

    .btn-secondary {
      background: rgba(255, 255, 255, 0.9);
      color: #333;
      border: 2px solid rgba(102, 126, 234, 0.3);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
    }

    .btn-secondary:hover {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      transform: translateY(-3px);
      box-shadow: 0 12px 35px rgba(102, 126, 234, 0.4);
    }

    /* åŠŸèƒ½åŒºåŸŸè®¾è®¡ */
    .features-section {
      padding: 60px;
    }

    .features-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 30px;
    }

    .feature-card {
      background: rgba(255, 255, 255, 0.8);
      border-radius: 16px;
      padding: 40px 30px;
      text-align: center;
      transition: all 0.3s ease;
      border: 1px solid rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
    }

    .feature-card:hover {
      transform: translateY(-10px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      background: rgba(255, 255, 255, 0.95);
    }

    .feature-icon {
      font-size: 48px;
      margin-bottom: 20px;
      display: block;
    }

    .feature-card h3 {
      font-size: 24px;
      font-weight: 700;
      color: #333;
      margin-bottom: 15px;
    }

    .feature-card p {
      color: #666;
      line-height: 1.6;
      font-size: 16px;
    }

    @media (max-width: 768px) {
      .main-content {
        padding: 0 15px;
        margin: 15px auto;
      }
    }
  </style>
<style>
    /* ç”¨æˆ·çŠ¶æ€ç°ä»£åŒ–è®¾è®¡ */
    #nav-user-status {
        display: flex;
        align-items: center;
        gap: 15px;
        font-size: 14px;
        font-weight: 500;
    }
    
    #nav-user-status span {
        color: #333;
        padding: 8px 15px;
        background: rgba(255, 255, 255, 0.9);
        border-radius: 20px;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    #nav-user-status a {
        cursor: pointer;
        color: white;
        text-decoration: none;
        padding: 8px 15px;
        background: linear-gradient(135deg, #667eea, #764ba2);
        border-radius: 20px;
        transition: all 0.3s ease;
        font-weight: 600;
        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
    }
    
    #nav-user-status a:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        text-decoration: none;
    }
    
    @media (max-width: 768px) {
        #nav-user-status {
            flex-direction: column;
            gap: 8px;
            font-size: 12px;
        }
        
        #nav-user-status span,
        #nav-user-status a {
            padding: 6px 12px;
            font-size: 12px;
        }
    }
</style>

</head>
<body>

  <!-- ç°ä»£åŒ–å¤´éƒ¨è®¾è®¡ -->
  <header class="site-header">
    <div class="header-container">
      <a href="index.html" class="logo-link">
        <img src="./images/GlobalWeiqi.png" alt="Global Weiqi Logo" class="site-logo">
      </a>
      <div id="nav-user-status"></div>
    </div>
  </header>

  <!-- ç°ä»£åŒ–å¯¼èˆªèœå• -->
<nav>
  <div class="nav-container">
    <ul class="menu">
      <li class="has-submenu">
        <a href="#">ğŸ† æ¯”èµ›ä¿¡æ¯</a>
        <ul class="submenu">
          <li><a href="standingsS1R5.html" data-page="standingsS1R5">ğŸ ç¬¬1æœŸï¼ˆå·²ç»“æŸï¼‰</a></li>
          <li class="has-submenu">
            <a href="#">ğŸ”¥ ç¬¬2æœŸï¼ˆè¿›è¡Œä¸­ï¼‰</a>
            <ul class="submenu-3">
              <li><a href="standingsS2R4.html" data-page="standingsS2R4">ğŸ“ˆ æ’è¡Œæ¦œ</a></li>
              <li><a href="GamesListS2R4.html" data-page="GamesListS2R4">âš”ï¸ ç¬¬4è½®å¯¹å±€</a></li>
            </ul>
          </li>
        </ul>
      </li>
      <li class="has-submenu">
        <a href="#">ğŸ“œ é‡è¦è¯´æ˜</a>
        <ul class="submenu">
          <li><a href="regulations.html" data-page="regulations">ğŸ“‹ æ¯”èµ›ç« ç¨‹</a></li>
          <li><a href="deposit.html" data-page="deposit">ğŸ’° ä¿è¯é‡‘</a></li>
          <li><a href="Review.html" data-page="Review">ğŸ“š å¤ç›˜è®²è§£</a></li>
          <li><a href="Mcmahon.html" data-page="Mcmahon">ğŸ² éº¦å…‹é©¬æ´ªç¼–æ’</a></li>
          <li><a href="play.html" data-page="play">â™Ÿï¸ ä¸‹æ£‹</a></li>
          <li><a href="board.html" data-page="board">ğŸ¨ å¯¹å¼ˆæ£‹ç›˜</a></li>
          <li><a href="pairing_flow.html" data-page="pairing_flow">ğŸ”„ åˆ†åŒºæµåŠ¨</a></li>
          <li><a href="flow_test.html" data-page="flow_test">ğŸ§ª æµåŠ¨æµ‹è¯•</a></li>
          <li><a href="api_debug.html" data-page="api_debug">ğŸ”§ APIè°ƒè¯•</a></li>
          <li><a href="mobile_menu_test.html" data-page="mobile_menu_test">ğŸ“± èœå•æµ‹è¯•</a></li>
          <li><a href="menu_debug.html" data-page="menu_debug">ğŸ› èœå•è°ƒè¯•</a></li>
          <li><a href="simple_menu_test.html" data-page="simple_menu_test">âš™ï¸ ç®€å•æµ‹è¯•</a></li>
          <li><a href="login.html" data-page="login">ğŸ”‘ ç™»é™†</a></li>
          <li><a href="zhuce.html" data-page="zhuce">ğŸ“ æ³¨å†Œ</a></li>
        </ul>
      </li>
      
      <li>
        <a href="ratinghistory.html" data-page="ratinghistory">ğŸ‘¥ ä¼šå‘˜åå½•</a>
      </li>
      
      <li>
        <a href="register.html" data-page="register" style="color: red; font-weight: bold;">ğŸ† é©¬ä¸ŠæŠ¥å</a>
      </li>

      <li>
        <a href="calculator.html" data-page="calculator">ğŸ“Š è®¡ç®—å™¨</a>
      </li>
    </ul>
  </div>
</nav>

  <!-- ä¸»å†…å®¹åŒºåŸŸ -->
  <div class="main-content">
    <div class="content-container" id="main-content">
      <!-- é»˜è®¤é¦–é¡µå†…å®¹ -->
      <div class="hero-section">
        <div class="hero-content">
          <h1 class="hero-title">å…¨çƒå›´æ£‹è¶…çº§è”èµ›</h1>
          <p class="hero-subtitle">å…¨åå‚ä¸ï¼Œé«˜æ‰‹äº‘é›†ï¼Œæ–°æ‰‹å‹å¥½ï¼ŒçœŸæ­£æ¶¨æ£‹çš„å…¨çƒå›´æ£‹è¶…çº§è”èµ›</p>
          <div class="hero-buttons">
            <a href="#" class="btn btn-primary" data-page="register">ğŸ† é©¬ä¸ŠæŠ¥å</a>
            <a href="#" class="btn btn-secondary" data-page="standings">ğŸ“ˆ æŸ¥çœ‹æ’å</a>
          </div>
        </div>
      </div>
      
      <div class="features-section">
        <div class="features-grid">
          <div class="feature-card">
            <div class="feature-icon">ğŸ†</div>
            <h3>æ¯”èµ›ä¿¡æ¯</h3>
            <p>å®æ—¶æ›´æ–°çš„æ¯”èµ›è¿›åº¦å’Œæ’åä¿¡æ¯</p>
          </div>
          <div class="feature-card">
            <div class="feature-icon">â™Ÿï¸</div>
            <h3>åœ¨çº¿å¯¹å¼ˆ</h3>
            <p>æ”¯æŒåœ¨çº¿ä¸‹æ£‹å’Œå¤ç›˜åˆ†æ</p>
          </div>
          <div class="feature-card">
            <div class="feature-icon">ğŸ“š</div>
            <h3>å­¦ä¹ èµ„æº</h3>
            <p>ä¸°å¯Œçš„å­¦ä¹ ææ–™å’ŒæŠ€å·§åˆ†äº«</p>
          </div>
          <div class="feature-card">
            <div class="feature-icon">ğŸ‘¥</div>
            <h3>ç¤¾åŒºäº¤æµ</h3>
            <p>ä¸å…¨çƒå›´æ£‹çˆ±å¥½è€…äº¤æµå­¦ä¹ </p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const API_BASE_URL = 'https://yaoshen.pythonanywhere.com/api';
    const userStatusDiv = document.getElementById('nav-user-status');

    // é¡µé¢å†…å®¹ç®¡ç†
    function showHomePage() {
        const mainContent = document.getElementById('main-content');
        mainContent.innerHTML = `
            <!-- é»˜è®¤é¦–é¡µå†…å®¹ -->
            <div class="hero-section">
                <div class="hero-content">
                    <h1 class="hero-title">å…¨çƒå›´æ£‹è¶…çº§è”èµ›</h1>
                    <p class="hero-subtitle">å…¨åå‚ä¸ï¼Œé«˜æ‰‹äº‘é›†ï¼Œæ–°æ‰‹å‹å¥½ï¼ŒçœŸæ­£æ¶¨æ£‹çš„å…¨çƒå›´æ£‹è¶…çº§è”èµ›</p>
                    <div class="hero-buttons">
                        <a href="#" class="btn btn-primary" data-page="register">ğŸ† é©¬ä¸ŠæŠ¥å</a>
                        <a href="#" class="btn btn-secondary" data-page="standingsS2R4">ğŸ“ˆ æŸ¥çœ‹æ’å</a>
                    </div>
                </div>
            </div>
            
            <div class="features-section">
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ†</div>
                        <h3>æ¯”èµ›ä¿¡æ¯</h3>
                        <p>å®æ—¶æ›´æ–°çš„æ¯”èµ›è¿›åº¦å’Œæ’åä¿¡æ¯</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">â™Ÿï¸</div>
                        <h3>åœ¨çº¿å¯¹å¼ˆ</h3>
                        <p>æ”¯æŒåœ¨çº¿ä¸‹æ£‹å’Œå¤ç›˜åˆ†æ</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ“š</div>
                        <h3>å­¦ä¹ èµ„æº</h3>
                        <p>ä¸°å¯Œçš„å­¦ä¹ ææ–™å’ŒæŠ€å·§åˆ†äº«</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ‘¥</div>
                        <h3>ç¤¾åŒºäº¤æµ</h3>
                        <p>ä¸å…¨çƒå›´æ£‹çˆ±å¥½è€…äº¤æµå­¦ä¹ </p>
                    </div>
                </div>
            </div>
        `;
        
        // ä¸ºé¦–é¡µæŒ‰é’®æ·»åŠ äº‹ä»¶ç›‘å¬å™¨
        const heroButtons = mainContent.querySelectorAll('[data-page]');
        heroButtons.forEach(button => {
            button.addEventListener('click', (e) => {
                e.preventDefault();
                const page = e.target.getAttribute('data-page');
                if (page === 'register') {
                    loadPage('register.html');
                } else if (page === 'standingsS2R4') {
                    loadPage('standingsS2R4.html');
                }
            });
        });
    }
    
    function loadPage(pageUrl) {
        console.log('åŠ è½½é¡µé¢:', pageUrl);
        const mainContent = document.getElementById('main-content');
        
        // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
        mainContent.innerHTML = `
            <div style="text-align: center; padding: 50px; color: #666;">
                <div style="font-size: 24px; margin-bottom: 20px;">â³</div>
                <div>æ­£åœ¨åŠ è½½é¡µé¢...</div>
            </div>
        `;
        
        // åŠ è½½å¤–éƒ¨HTMLæ–‡ä»¶
        fetch(pageUrl)
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                return response.text();
            })
            .then(html => {
                // æå–bodyå†…å®¹æˆ–å®Œæ•´HTML
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');
                const bodyContent = doc.body;
                
                if (bodyContent) {
                    mainContent.innerHTML = bodyContent.innerHTML;
                } else {
                    mainContent.innerHTML = html;
                }
                
                // æ‰§è¡Œé¡µé¢ä¸­çš„è„šæœ¬
                const scripts = mainContent.querySelectorAll('script');
                scripts.forEach(script => {
                    const newScript = document.createElement('script');
                    if (script.src) {
                        newScript.src = script.src;
                    } else {
                        newScript.textContent = script.textContent;
                    }
                    document.head.appendChild(newScript);
                });
                
                console.log('é¡µé¢åŠ è½½å®Œæˆ:', pageUrl);
            })
            .catch(error => {
                console.error('é¡µé¢åŠ è½½å¤±è´¥:', error);
                mainContent.innerHTML = `
                    <div style="text-align: center; padding: 50px; color: #e74c3c;">
                        <div style="font-size: 24px; margin-bottom: 20px;">âŒ</div>
                        <div>é¡µé¢åŠ è½½å¤±è´¥</div>
                        <div style="margin-top: 10px; font-size: 14px; color: #7f8c8d;">${error.message}</div>
                        <button onclick="showHomePage()" style="margin-top: 20px; padding: 10px 20px; background: #3498db; color: white; border: none; border-radius: 5px; cursor: pointer;">è¿”å›é¦–é¡µ</button>
                    </div>
                `;
            });
    }
    
    // åˆå§‹åŒ–å¯¼èˆªäº‹ä»¶ç›‘å¬å™¨
    function initNavigation() {
        // ä¸ºæ‰€æœ‰å¸¦æœ‰data-pageå±æ€§çš„é“¾æ¥æ·»åŠ äº‹ä»¶ç›‘å¬å™¨
        document.querySelectorAll('a[data-page]').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const pageUrl = e.target.getAttribute('href');
                loadPage(pageUrl);
            });
        });
    }
    
    function initMobileMenu() {
        console.log('åˆå§‹åŒ–ç§»åŠ¨ç«¯èœå•...');
        
        // å…³é—­æ‰€æœ‰èœå•çš„ç»Ÿä¸€å‡½æ•°
        function closeAllMenus() {
            console.log('å…³é—­æ‰€æœ‰èœå•');
            document.querySelectorAll('.submenu.active, .submenu-3.active').forEach(activeSubmenu => {
                activeSubmenu.classList.remove('active');
            });
            document.querySelectorAll('.menu li.active').forEach(activeItem => {
                activeItem.classList.remove('active');
            });
        }
        
        // ä¸ºæ‰€æœ‰æœ‰å­èœå•çš„ä¸€çº§èœå•é¡¹æ·»åŠ ç‚¹å‡»äº‹ä»¶
        const menuItems = document.querySelectorAll('.menu > li.has-submenu > a');
        console.log('æ‰¾åˆ°èœå•é¡¹:', menuItems.length);
        
        menuItems.forEach((menuLink, index) => {
            console.log(`è®¾ç½®èœå•é¡¹ ${index + 1}: ${menuLink.textContent.trim()}`);
            
            menuLink.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                console.log('ç‚¹å‡»äº†èœå•:', this.textContent.trim());
                
                const parentLi = this.parentElement;
                const submenu = parentLi.querySelector('.submenu');
                
                if (submenu) {
                    // æ£€æŸ¥å½“å‰èœå•æ˜¯å¦å·²ç»æ¿€æ´»
                    const isCurrentlyActive = submenu.classList.contains('active');
                    
                    // å…ˆå…³é—­æ‰€æœ‰èœå•
                    document.querySelectorAll('.submenu.active').forEach(activeMenu => {
                        activeMenu.classList.remove('active');
                        activeMenu.parentElement.classList.remove('active');
                    });
                    document.querySelectorAll('.submenu-3.active').forEach(activeMenu3 => {
                        activeMenu3.classList.remove('active');
                        activeMenu3.parentElement.classList.remove('active');
                    });
                    
                    // å¦‚æœä¹‹å‰æ²¡æœ‰æ¿€æ´»ï¼Œåˆ™æ‰“å¼€å½“å‰èœå•ï¼›å¦‚æœå·²æ¿€æ´»ä¸”é‡å¤ç‚¹å‡»ï¼Œåˆ™å…³é—­æ‰€æœ‰èœå•
                    if (!isCurrentlyActive) {
                        submenu.classList.add('active');
                        parentLi.classList.add('active');
                        console.log('æ‰“å¼€å­èœå•');
                    } else {
                        console.log('é‡å¤ç‚¹å‡»åŒä¸€èœå•ï¼Œå…³é—­æ‰€æœ‰èœå•');
                    }
                }
            });
        });
        
        // ä¸ºä¸‰çº§èœå•é¡¹æ·»åŠ ç‚¹å‡»äº‹ä»¶
        const submenuItems = document.querySelectorAll('.submenu li.has-submenu > a');
        console.log('æ‰¾åˆ°ä¸‰çº§èœå•é¡¹:', submenuItems.length);
        
        submenuItems.forEach((submenuLink, index) => {
            submenuLink.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                console.log('ç‚¹å‡»äº†ä¸‰çº§èœå•:', this.textContent.trim());
                
                const parentLi = this.parentElement;
                const submenu3 = parentLi.querySelector('.submenu-3');
                
                if (submenu3) {
                    const isActive = submenu3.classList.contains('active');
                    if (isActive) {
                        submenu3.classList.remove('active');
                        parentLi.classList.remove('active');
                    } else {
                        submenu3.classList.add('active');
                        parentLi.classList.add('active');
                    }
                }
            });
        });
        
        // ä¸ºæ‰€æœ‰å­èœå•å’Œä¸‰çº§èœå•çš„é“¾æ¥æ·»åŠ ç‚¹å‡»å…³é—­åŠŸèƒ½
        document.querySelectorAll('.submenu a, .submenu-3 a').forEach(link => {
            // è·³è¿‡æœ‰å­èœå•çš„é¡¹ç›®ï¼ˆè¿™äº›é¡¹ç›®ç”¨äºå±•å¼€ä¸‹çº§èœå•ï¼‰
            if (!link.parentElement.classList.contains('has-submenu')) {
                link.addEventListener('click', function(e) {
                    console.log('ç‚¹å‡»äº†èœå•é¡¹:', this.textContent.trim());
                    
                    // è·å–é¡µé¢URL
                    const pageUrl = this.getAttribute('href');
                    if (pageUrl && pageUrl !== '#') {
                        e.preventDefault();
                        loadPage(pageUrl);
                    }
                    
                    // ç«‹å³å…³é—­æ‰€æœ‰èœå•
                    closeAllMenus();
                });
            }
        });
        
        // ç‚¹å‡»å¤–éƒ¨åŒºåŸŸå…³é—­èœå•
        document.addEventListener('click', function(e) {
            if (!e.target.closest('nav')) {
                console.log('ç‚¹å‡»å¤–éƒ¨ï¼Œå…³é—­èœå•');
                closeAllMenus();
            }
        });
        
        // ESCé”®å…³é—­èœå•
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                console.log('æŒ‰ä¸‹ESCé”®ï¼Œå…³é—­èœå•');
                closeAllMenus();
            }
        });

        
        console.log('ç§»åŠ¨ç«¯èœå•åˆå§‹åŒ–å®Œæˆ');
    }

    function checkLoginStatus() {
        fetch(`${API_BASE_URL}/status/`, { credentials: 'include' })
            .then(response => response.json())
            .then(data => {
                if (data.logged_in) {
                    userStatusDiv.innerHTML = `
                        <span>æ¬¢è¿æ‚¨, ${data.user.name || 'ä¼šå‘˜'} (ID: ${data.user.member_id})</span>
                        <a id="logout-link">é€€å‡ºç™»å½•</a>
                    `;
                    document.getElementById('logout-link').addEventListener('click', handleLogout);
                } else {
                    userStatusDiv.innerHTML = `
                        <a href="#" data-page="login">ç™»å½•</a>
                        <a href="#" data-page="zhuce">æ³¨å†Œ</a>
                    `;
                    // ä¸ºæ–°åˆ›å»ºçš„ç™»å½•å’Œæ³¨å†Œé“¾æ¥æ·»åŠ äº‹ä»¶ç›‘å¬å™¨
                    document.querySelector('a[data-page="login"]').addEventListener('click', (e) => {
                        e.preventDefault();
                        loadPage('login.html');
                    });
                    document.querySelector('a[data-page="zhuce"]').addEventListener('click', (e) => {
                        e.preventDefault();
                        loadPage('zhuce.html');
                    });
                }
            });
    }

    function handleLogout() {
        fetch(`${API_BASE_URL}/logout/`, { method: 'POST', credentials: 'include' })
            .then(res => res.json())
            .then(data => {
                if(data.success) {
                    alert('æ‚¨å·²æˆåŠŸé€€å‡ºã€‚');
                    checkLoginStatus(); // æ›´æ–°UI
                    showHomePage(); // é€€å‡ºåï¼Œè¿”å›é¦–é¡µ
                }
            });
    }

    // ç›‘å¬æ¥è‡ªå­é¡µé¢çš„æ¶ˆæ¯ï¼Œåœ¨ç™»å½•æˆ–æ³¨å†ŒæˆåŠŸååˆ·æ–°çŠ¶æ€
    window.addEventListener("message", (event) => {
        if (event.data === "loginSuccess" || event.data === "registrationSuccess") {
            checkLoginStatus();
            showHomePage(); // æˆåŠŸåè¿”å›é¦–é¡µ
        }
    });

    // é¡µé¢åŠ è½½æ—¶ç«‹å³æ‰§è¡Œ
    document.addEventListener('DOMContentLoaded', function() {
        checkLoginStatus();
        initMobileMenu();
        initNavigation();
        showHomePage(); // é»˜è®¤æ˜¾ç¤ºé¦–é¡µ
    });
    
    // çª—å£å¤§å°æ”¹å˜æ—¶é‡æ–°åˆå§‹åŒ–èœå•
    window.addEventListener('resize', function() {
        // æ¸…é™¤æ‰€æœ‰æ´»åŠ¨çŠ¶æ€
        document.querySelectorAll('.submenu.active, .submenu-3.active').forEach(activeSubmenu => {
            activeSubmenu.classList.remove('active');
        });
        document.querySelectorAll('.menu li.active').forEach(activeItem => {
            activeItem.classList.remove('active');
        });
        
        // é‡æ–°åˆå§‹åŒ–
        setTimeout(initMobileMenu, 100);
    });
</script>

</body>
</html>
